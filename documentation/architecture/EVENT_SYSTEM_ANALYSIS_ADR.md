# ADR: –ê–Ω–∞–ª–∏–∑ –∏ –∫–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π

**–°—Ç–∞—Ç—É—Å:** –¢—Ä–µ–±—É–µ—Ç —Ä–µ—à–µ–Ω–∏—è  
**–î–∞—Ç–∞:** 2025-11-04  
**–ê–≤—Ç–æ—Ä:** Architecture Review  

---

## 1. –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –ø–æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç **–¥–≤–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –º–µ—Ö–∞–Ω–∏–∑–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–±—ã—Ç–∏–π**:

| –ê—Å–ø–µ–∫—Ç | `event-setup.ts` | `event-publisher.ts` |
|--------|------------------|---------------------|
| **–¢–∏–ø —à–∏–Ω—ã** | `EventBus` (–∏–∑ event-bus.ts) | `InMemoryEventPublisher` |
| **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** | `setupEventHandlers(eventBus)` –≤ `index.ts` | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø–æ–¥–ø–∏—Å–∫–∞ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ –º–æ–¥—É–ª—è |
| **–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** | –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `scheduler-service.ts` –∏ `game-service.ts` | –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–∏–≥–¥–µ –≤ –∫–æ–¥–µ |
| **–û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏** | 8 –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (GameReminder24h, GameReminder2h, PaymentReminder*, PlayerJoined, WaitlistedPromoted, PaymentMarked, GameCreated, SendPaymentReminders) | 8 –∏–¥–µ–Ω—Ç–∏—á–Ω—ã—Ö –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ (–¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞) |
| **–°–µ—Ä–≤–∏—Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** | `EnhancedNotificationService` | `NotificationService` (—Å–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è) |
| **–°—Ç–∞—Ç—É—Å** | ‚úÖ –ê–∫—Ç–∏–≤–Ω–∞ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç | ‚ùå –ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥ (–Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è) |

### –ü—Ä–æ–±–ª–µ–º–∞
**–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –∏–∑ `event-setup.ts` —Ä–∞–±–æ—Ç–∞—é—Ç, –∞ –∏–∑ `event-publisher.ts` –Ω–µ—Ç** –ø–æ—Ç–æ–º—É —á—Ç–æ:

1. **`event-publisher.ts` –Ω–∏–∫–æ–≥–¥–∞ –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è** ‚Äî —Å–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ `EventBus`, –∞ –Ω–µ –≤ `InMemoryEventPublisher`
2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏** ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö
3. **–ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–∏—Å–æ–≤ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π** ‚Äî `EnhancedNotificationService` vs `NotificationService`
4. **–ü—É—Ç–∞–Ω–∏—Ü–∞ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ** ‚Äî –¥–≤–∞ —Ä–∞–∑–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–∞ –¥–ª—è –æ–¥–Ω–æ–π –∑–∞–¥–∞—á–∏

---

## 2. –†–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã

### –í–∞—Ä–∏–∞–Ω—Ç A: –£–¥–∞–ª–∏—Ç—å `event-publisher.ts` (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

**–û–ø–∏—Å–∞–Ω–∏–µ:** –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ `EventBus` + `event-setup.ts`, —É–¥–∞–ª–∏—Ç—å –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥ `event-publisher.ts`.

**–ü–ª—é—Å—ã:**
- ‚úÖ –£—Å—Ç—Ä–∞–Ω—è–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø—É—Ç–∞–Ω–∏—Ü—É
- ‚úÖ –û–¥–Ω–∞ —Ç–æ—á–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ (–≤ `index.ts`)
- ‚úÖ –Ø–≤–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤
- ‚úÖ –õ–µ–≥—á–µ –æ—Ç–ª–∞–¥–∏—Ç—å (–≤–∏–¥–Ω–æ, –∫–∞–∫–∏–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (—É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ —É–¥–∞–ª–∏—Ç—å —Ñ–∞–π–ª –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã

**–†–∏—Å–∫–∏:**
- üî¥ –ù–∏–∑–∫–∏–µ ‚Äî `event-publisher.ts` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–∞—è (1-2 —á–∞—Å–∞)

---

### –í–∞—Ä–∏–∞–Ω—Ç B: –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤ –æ–¥–∏–Ω –º–æ–¥—É–ª—å `event-handlers.ts`

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–æ–¥—É–ª—å —Å —è–≤–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π, –æ–±—ä–µ–¥–∏–Ω–∏–≤ –ª—É—á—à–µ–µ –∏–∑ –æ–±–æ–∏—Ö –ø–æ–¥—Ö–æ–¥–æ–≤.

```typescript
// src/shared/event-handlers.ts
export async function registerEventHandlers(eventBus: EventBus): Promise<void> {
  // –í—Å–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
  eventBus.subscribe('GameReminder24h', { handle: handleGameReminder24h });
  // ...
}
```

**–ü–ª—é—Å—ã:**
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- ‚úÖ –Ø–≤–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
- ‚úÖ –õ–µ–≥—á–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å
- ‚úÖ –õ—É—á—à–µ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

**–ú–∏–Ω—É—Å—ã:**
- ‚ö†Ô∏è –ù—É–∂–Ω–æ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∫–æ–¥ –∏–∑ `event-setup.ts`
- ‚ö†Ô∏è –ù–µ–±–æ–ª—å—à–æ–π —Ä–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥

**–†–∏—Å–∫–∏:**
- üü° –°—Ä–µ–¥–Ω–∏–µ ‚Äî –Ω—É–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê –ü—Ä–æ—Å—Ç–∞—è (2-3 —á–∞—Å–∞)

---

### –í–∞—Ä–∏–∞–Ω—Ç C: –û—Å—Ç–∞–≤–∏—Ç—å –æ–±–∞ –º–æ–¥—É–ª—è, –Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å

**–û–ø–∏—Å–∞–Ω–∏–µ:** –°–¥–µ–ª–∞—Ç—å `event-publisher.ts` –∞–∫—Ç–∏–≤–Ω—ã–º, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ —Å `EventBus`.

**–ü–ª—é—Å—ã:**
- ‚úÖ –†–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–∏–µ (–¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞)
- ‚úÖ –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–∞—è –º–∏–≥—Ä–∞—Ü–∏—è

**–ú–∏–Ω—É—Å—ã:**
- ‚ùå –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–≥–∏–∫–∏
- ‚ùå –°–ª–æ–∂–Ω–µ–µ –æ—Ç–ª–∞–¥–∏—Ç—å
- ‚ùå –ë–æ–ª—å—à–µ –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- ‚ùå –ü—É—Ç–∞–Ω–∏—Ü–∞ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ

**–†–∏—Å–∫–∏:**
- üî¥ –í—ã—Å–æ–∫–∏–µ ‚Äî race conditions, –Ω–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è

**–°–ª–æ–∂–Ω–æ—Å—Ç—å:** ‚≠ê‚≠ê‚≠ê –°–ª–æ–∂–Ω–∞—è (4-5 —á–∞—Å–æ–≤)

---

## 3. –†–µ—à–µ–Ω–∏–µ –∏ –æ–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ

### ‚úÖ –í—ã–±—Ä–∞–Ω **–í–∞—Ä–∏–∞–Ω—Ç A + —ç–ª–µ–º–µ–Ω—Ç—ã –í–∞—Ä–∏–∞–Ω—Ç–∞ B**

**–î–µ–π—Å—Ç–≤–∏—è:**

1. **–£–¥–∞–ª–∏—Ç—å `src/shared/event-publisher.ts`** ‚Äî –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥
2. **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å `event-setup.ts` ‚Üí `event-handlers.ts`** –∏ –ø–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –≤ `src/shared/`
3. **–û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã** –≤ `index.ts`
4. **–î–æ–±–∞–≤–∏—Ç—å —è–≤–Ω—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é** –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

**–û–±–æ—Å–Ω–æ–≤–∞–Ω–∏–µ:**
- `EventBus` —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤–µ–∑–¥–µ
- `event-setup.ts` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –ª–æ–≥–∏–∫—É
- –ù–µ—Ç —Å–º—ã—Å–ª–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –¥–≤–∞ –º–µ—Ö–∞–Ω–∏–∑–º–∞
- –ö–æ–Ω—Å–æ–ª–∏–¥–∞—Ü–∏—è —É–ø—Ä–æ—Å—Ç–∏—Ç –æ—Ç–ª–∞–¥–∫—É –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É

---

## 4. –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è

### –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ ‚úÖ

| –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|----------|
| **–£–ø—Ä–æ—â–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã** | –û–¥–∏–Ω –º–µ—Ö–∞–Ω–∏–∑–º –≤–º–µ—Å—Ç–æ –¥–≤—É—Ö |
| **–£–ª—É—á—à–µ–Ω–∏–µ –æ—Ç–ª–∞–¥–∫–∏** | –Ø–≤–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ |
| **–°–Ω–∏–∂–µ–Ω–∏–µ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –¥–æ–ª–≥–∞** | –£–¥–∞–ª–µ–Ω–∏–µ –º–µ—Ä—Ç–≤–æ–≥–æ –∫–æ–¥–∞ |
| **–õ—É—á—à–∞—è –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å** | –ú–µ–Ω—å—à–µ —Ñ–∞–π–ª–æ–≤, –º–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | –ù–µ—Ç –ª–∏—à–Ω–∏—Ö –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ |

### –û—Ç—Ä–∏—Ü–∞—Ç–µ–ª—å–Ω—ã–µ ‚ö†Ô∏è

| –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏–µ | –û–ø–∏—Å–∞–Ω–∏–µ | –†–µ—à–µ–Ω–∏–µ |
|------------|----------|---------|
| **–£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥–∞** | –ù—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ `event-publisher.ts` –Ω–µ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è | Grep –ø–æ–∏—Å–∫ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º |
| **–ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞** | –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –≤ `index.ts` | –ü—Ä–æ—Å—Ç–∞—è –∑–∞–º–µ–Ω–∞ —Å—Ç—Ä–æ–∫–∏ |

---

## 5. –ü–ª–∞–Ω —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### –®–∞–≥ 1: –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
grep -r "event-publisher" src/ --include="*.ts"
grep -r "event-setup" src/ --include="*.ts"
```

### –®–∞–≥ 2: –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å –∏ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞—Ç—å
- –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `src/infrastructure/event-setup.ts` ‚Üí `src/shared/event-handlers.ts`
- –û–±–Ω–æ–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ `index.ts`

### –®–∞–≥ 3: –£–¥–∞–ª–∏—Ç—å –º–µ—Ä—Ç–≤—ã–π –∫–æ–¥
- –£–¥–∞–ª–∏—Ç—å `src/shared/event-publisher.ts`
- –£–¥–∞–ª–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã `eventPublisher` –∏–∑ –¥—Ä—É–≥–∏—Ö —Ñ–∞–π–ª–æ–≤ (–µ—Å–ª–∏ –µ—Å—Ç—å)

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
- –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ç–µ—Å—Ç–æ–≤–æ–µ —Å–æ–±—ã—Ç–∏–µ –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

---

## 6. –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã (–æ—Ç–∫–ª–æ–Ω–µ–Ω—ã)

### –ü–æ—á–µ–º—É –Ω–µ –í–∞—Ä–∏–∞–Ω—Ç C (–æ–±–∞ –º–æ–¥—É–ª—è)?
- **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ** ‚Äî –æ–¥–∏–Ω–∞–∫–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –≤ –¥–≤—É—Ö –º–µ—Å—Ç–∞—Ö
- **–°–ª–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–ª–∞–¥–∫–∏** ‚Äî –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π –º–µ—Ö–∞–Ω–∏–∑–º –æ–±—Ä–∞–±–æ—Ç–∞–ª —Å–æ–±—ã—Ç–∏–µ
- **–†–∏—Å–∫ race conditions** ‚Äî –µ—Å–ª–∏ –æ–±–∞ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –æ—Ç–ø—Ä–∞–≤—è—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
- **–¢–µ—Ö–¥–æ–ª–≥** ‚Äî –±–æ–ª—å—à–µ –∫–æ–¥–∞ –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏

### –ü–æ—á–µ–º—É –Ω–µ –æ—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å?
- **–ú–µ—Ä—Ç–≤—ã–π –∫–æ–¥** ‚Äî `event-publisher.ts` –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è
- **–ü—É—Ç–∞–Ω–∏—Ü–∞** ‚Äî —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –º–æ–≥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ
- **–¢–µ—Ö–¥–æ–ª–≥** ‚Äî –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º

---

## 7. –ú–µ—Ç—Ä–∏–∫–∏ —É—Å–ø–µ—Ö–∞

- ‚úÖ –í—Å–µ —Å–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ `EventBus`
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ù–µ—Ç –∏–º–ø–æ—Ä—Ç–æ–≤ –∏–∑ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –º–æ–¥—É–ª—è
- ‚úÖ –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ

---

## –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–µ—Ö–∞–Ω–∏–∑–º–æ–≤

### EventBus (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```typescript
// index.ts
const eventBus = new EventBus();
await setupEventHandlers(eventBus);

// event-setup.ts
eventBus.subscribe('GameReminder24h', { handle: handleGameReminder24h });
```

### InMemoryEventPublisher (–Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
```typescript
// event-publisher.ts (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ)
eventPublisher.subscribe('GameReminder24h', handleGameReminder24h);

// –ù–æ —Å–æ–±—ã—Ç–∏—è –ø—É–±–ª–∏–∫—É—é—Ç—Å—è –≤ EventBus, –Ω–µ –≤ eventPublisher!
await eventBus.publish(event); // ‚Üê –í–æ—Ç –ø—Ä–æ–±–ª–µ–º–∞
```

**–í—ã–≤–æ–¥:** –°–æ–±—ã—Ç–∏—è –∏–¥—É—Ç –≤ `EventBus`, –Ω–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥–ø–∏—Å–∞–Ω—ã –Ω–∞ `eventPublisher` ‚Üí —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è—é—Ç—Å—è.

